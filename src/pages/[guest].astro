---
import Banner from "@components/organisms/Banner/Banner.astro";
import Date from "@components/organisms/Date/Date.astro";
import DressCode from "@components/organisms/DressCode/DressCode.astro";
import GuestSection from "@components/organisms/Guest/Guest.astro";
import Location from "@components/organisms/Location/Location.astro";
import Table from "@components/organisms/Table/Table.astro";
import Layout from "@layouts/Layout.astro";
import type { Guest } from "@models/types/guest";
import { tables } from "../data.json";

export const allGuests: Guest[] = tables.flat();

const guestParam: string = Astro.params.guest;

const guest: Guest | undefined = allGuests.find(
  (g: Guest) => g.id === guestParam
);

export function getStaticPaths() {
  return allGuests.map((guest: Guest) => ({
    params: { guest: guest.id },
  }));
}
---

<Layout guest={guest}>
  <Banner />
  {guest && <GuestSection guest={guest} />}
  <Date />
  <Location />
  {guest && <Table guest={guest} />}
  <DressCode />
</Layout>
